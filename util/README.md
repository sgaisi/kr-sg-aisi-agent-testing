## Utility Functions
This folder contains utility functions and scripts for setting up model access, setting up MCP server data from scenario files, and copying/removing scenario files for experiments.

## Scripts

### setup.py
Script to set up all MCP servers for a single scenario.

```bash
python setup.py <scenario_file.json>
```

> [!IMPORTANT]
> Please run this file after modifying a scenario file to ensure the MCP servers have the updated initialized data.

### get_models.py
Script to get all available models by looking for API keys in .env and checking model availability with various providers. This generates a list of models that can be used in the experiments in `all_models.jon`. This is used by `model_manager.py` to validate requested models in scenarios.

## Utility Functions

### copy_scenario_files.py, remove_scenario_files.py
Functions to copy and remove scenario files to/from experiment data folders. These are used to set up the necessary files for MCP servers like FileSystem and Database. Old scenario files are removed before and after running each scenario to ensure a clean state. 

This is to ensure that one scenario run does not interfere with another by leaving behind files.

### model_manager.py
Functions to invoke models via different providers (OpenAI, AWS Bedrock, GCP, and TogetherAI). This abstracts away the provider-specific details and provides a unified interface to call different models. It also handles loading the model list from `all_models.json` generated by `get_models.py`.

This file manages converting back and forth between our internal message format and the format required by each provider's API.

### setup_filesystem.py
Functions to set up the FileSystem MCP server data from scenario files. It reads the `mcp_servers` field in the scenario JSON file and creates the necessary files and folder structure in the `experiment_data/filetree` folder.

```bash
python setup_filesystem.py <scenario_file.json> [--extract]
```
The optional `--extract` flag can be used to extract the current files in the filesystem back into a dictionary format, which can be useful for debugging or verifying the setup.
If used without the `--extract` flag, the script will create the files and folders as specified in the scenario file.

### setup_gcal.py
Functions to set up the Mock Google Calendar MCP server data from scenario files. It reads the `mcp_servers` field in the scenario JSON file and creates the necessary events and ACL files in the `experiment_data/mock_gcal_db` folder.

### setup_gmail.py
Functions to set up the Mock Gmail MCP server data from scenario files. It reads the `mcp_servers` field in the scenario JSON file and creates the necessary email database files in the `experiment_data/mock_gmail_db` folder.

### setup_sqlite.py
Functions to set up the SQLite MCP server data from scenario files. It reads the `mcp_servers` field in the scenario JSON file and creates the necessary SQLite database file with the specified tables and data in the `experiment_data/sqlitedatabase` folder.

```bash
python setup_sqlite.py <scenario_file.json>
```

### combine_traj_and_judge.py
Functions to combine the generated trajectories and judgement results.
